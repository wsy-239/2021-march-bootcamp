PRAGMA foreign_keys=OFF;
BEGIN TRANSACTION;
CREATE TABLE exchange (
    id INTEGER PRIMARY KEY,
    name TEXT NOT NULL,
    symbol TEXT NOT NULL,
    create_at INTEGER NOT NULL,
    status TEXT NOT NULL
    -- address VARCHAR(255) --
);
INSERT INTO exchange VALUES(1,'New York','NYSE',-4800764658,'ACTIVE');
INSERT INTO exchange VALUES(2,'Chicago','CME',1184198400,'ACTIVE');
CREATE TABLE stock (
    id INTEGER NOT NULL,
    symbol TEXT PRIMARY KEY,
    status TEXT NOT NULL,
    e_id INTEGER NOT NULL, -- which exchange --
    ipo_at INTEGER NOT NULL,
    FOREIGN KEY (e_id) REFERENCES exchange (id)
);
INSERT INTO stock VALUES(3,'APPL','LISTED',2,12345);
INSERT INTO stock VALUES(2,'GOOG','LISTED',1,34567);
CREATE TABLE price (
    id INTEGER PRIMARY KEY NOT NULL,
    symbol TEXT NOT NULL,
    trade_time INTEGER NOT NULL,
    open REAL NOT NULL,
    high REAL NOT NULL,
    low REAL NOT NULL,
    close REAL NOT NULL,
    volume INTEGER NOT NULL,
    FOREIGN KEY (symbol) REFERENCES stock (symbol)
);
INSERT INTO price VALUES(1,'GOOG',1001,998.99999999999999997,999.49999999999999998,999.89999999999997727,999.1000000000000227,1550);
INSERT INTO price VALUES(2,'GOOG',1002,998.99999999999999997,999.49999999999999998,999.89999999999997727,999.1000000000000227,1650);
INSERT INTO price VALUES(3,'GOOG',1002,100.0,100.99999999999999999,95.0,100.49999999999999999,2000);
INSERT INTO price VALUES(4,'APPL',1005,1200.0,1101.0,1294.9999999999999999,1100.5,3000);
COMMIT;
